<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>新楓之谷-覺醒星火</title>
    <script src="./js/tailwind.js"></script>
    <style>
      body {
        background: #222;
        font-family: "Microsoft JhengHei";
      }
      .navList {
        --sb-track-color: #999999;
        --sb-thumb-color: #ffffff;
        --sb-size: 4px;
      }

      .navList::-webkit-scrollbar {
        width: var(--sb-size);
      }

      .navList::-webkit-scrollbar-track {
        background: var(--sb-track-color);
        border-radius: 5px;
      }

      .navList::-webkit-scrollbar-thumb {
        background: var(--sb-thumb-color);
        border-radius: 5px;
      }

      @supports not selector(::-webkit-scrollbar) {
        .navList {
          scrollbar-color: var(--sb-thumb-color) var(--sb-track-color);
        }
      }
    </style>
  </head>
  <body>
    <div id="app">
      <h1 class="text-2xl text-white text-center font-bold mt-10">
        星火模擬器-Beta版
      </h1>
      <nav class="fixed md:w-[75px] w-[50px] h-full top-0 left-0 bg-[#999]">
        <span
          v-show="SparkCount === 0"
          class="fixed top-4 left-[75px] md:left-[80px] text-[#FF0] text-sm"
          >圖點兩下可切換裝備</span
        >
        <ul
          class="navList flex flex-col gap-y-4 h-[97%] overflow-hidden overflow-y-scroll py-4"
          v-if="EquipImgRender.length !== 0 "
        >
          <li
            v-for="list in EquipImgRender"
            :key="list.url"
            @dblclick="handImgItem(null,list.url)"
            class="flex justify-center flex-col items-center"
          >
            <img
              class="w-[40px] mx-auto cursor-pointer"
              :src="`./img/${list.url}.png`"
              alt=""
            />
            <span class="text-sm font-bold pt-2">{{list.alt}}</span>
          </li>
        </ul>
      </nav>

      <div class="flex ml-[55px] md:ml-[100px] flex-wrap absolute">
        <!-- 選單區塊 -->
        <div class="flex md:flex-col flex-wrap mt-8 gap-y-2">
          <label class="w-[50%]">
            <span class="text-white mr-2">裝備 :</span>
            <select
              class="text-xs py-1 w-[120px]"
              v-model="EquipType.is"
              @change="handEquipType(null,EquipType.is)"
              :disabled="SparkCount !== 0"
            >
              <option value="請選擇裝備類型">請選擇裝備類型</option>
              <option value="創世">創世武器</option>
              <option value="頂培">一般裝備(頂培)</option>
              <option value="滅龍">一般裝備(滅龍)</option>
              <option value="漆黑">Boss裝備(漆黑飾品)</option>
              <option value="防具">Boss裝備(防具)</option>
            </select>
          </label>
          <label class="w-[50%]">
            <span class="text-white mr-2">星火 :</span>
            <select
              class="text-xs py-1 w-[120px]"
              v-model="SparkType.is"
              @change="handSparkType(null,SparkType.is)"
              :disabled="SparkCount !== 0"
            >
              <option v-for="list in SparkTypeData" :value="list">
                {{list}}
              </option>
            </select>
          </label>

          <label class="w-[50%]">
            <span class="text-white mr-2">職業 :</span>
            <select
              class="text-xs py-1 w-[120px]"
              :disabled="SparkCount !== 0"
              v-model="JobType.is"
              @change="handJobType(null,JobType.is)"
            >
              <option v-for="list in JobTypeData" :key="list" :value="list">
                {{list}}
              </option>
            </select>
          </label>
          <label class="w-[50%] relative">
            <span class="text-white mr-2">目標 :</span>
            <select
              class="text-xs py-1 w-[120px]"
              :disabled="SparkCount !== 0"
              v-model="AimType.is"
            >
              <option v-for="list in AimTypeData" :value="list">
                {{list}}
              </option>
            </select>
            <span
              class="text-white absolute top-[calc(100%+5px)] left-0 w-[150px]"
              v-show="EquipType.is === '創世'"
              >hint:<span class="ml-4 text-sm text-[#FF0]"
                >{{WeaponTypeHint.key}}攻 = {{WeaponTypeHint.val}}攻</span
              ></span
            >
          </label>
          <label class="w-full min-w-[150px] relative mt-6">
            <span class="text-white mr-2 block">等值換算 :</span>
            <div v-show="EquipType.is ==='創世'">
              <div class="flex items-center py-1">
                <span class="text-white inline-block w-[70px]">1%全屬</span>
                <span class="text-white pr-4">=</span>
                <input
                  v-model.number="AllSTATtoATK"
                  class="text-xs p-1 mr-2 w-[50px]"
                  type="text"
                  max="5"
                  :disabled="SparkCount !== 0"
                />
                <span class="text-white">攻</span>
              </div>
              <div class="flex items-center py-1">
                <span class="text-white inline-block w-[70px]">1主屬</span>
                <span class="text-white pr-4">=</span>
                <input
                  v-model.number="MAINSTATtoATK"
                  class="text-xs p-1 mr-2 w-[50px]"
                  type="text"
                  max="5"
                  :disabled="SparkCount !== 0"
                />
                <span class="text-white">攻</span>
              </div>
              <div class="flex items-center py-1">
                <span class="text-white inline-block w-[70px]">1B</span>
                <span class="text-white pr-4">=</span>
                <input
                  class="text-xs p-1 mr-2 w-[50px]"
                  type="text"
                  max="5"
                  v-model.number="BOSStoATK"
                  :disabled="SparkCount !== 0"
                />
                <span class="text-white">攻</span>
              </div>
            </div>
            <div v-show="EquipType.is !=='創世'" class="relative">
              <div class="flex items-center py-1">
                <span class="text-white inline-block w-[70px]">1%全屬</span>
                <span class="text-white pr-4">=</span>
                <input
                  class="text-xs p-1 mr-2 w-[50px]"
                  type="text"
                  max="5"
                  v-model.number="AllSTATtoMAINSTAT"
                  :disabled="SparkCount !== 0"
                />
                <span class="text-white">主屬</span>
              </div>
              <div class="flex items-center py-1">
                <span class="text-white inline-block w-[70px]">1攻</span>
                <span class="text-white pr-4">=</span>
                <input
                  class="text-xs p-1 mr-2 w-[50px]"
                  type="text"
                  max="5"
                  v-model.number="ATKtoMAINSTAT"
                  :disabled="SparkCount !== 0"
                />
                <span class="text-white">主屬</span>
              </div>
              <div class="flex items-center py-1">
                <span class="text-white inline-block w-[70px]">1副屬</span>
                <span class="text-white pr-4">=</span>
                <input
                  class="text-xs p-1 mr-2 w-[50px]"
                  type="text"
                  max="5"
                  v-model.number="SUBtoMAINSTAT"
                  :disabled="SparkCount !== 0"
                />
                <span class="text-white">主屬</span>
              </div>
              <div class="flex items-center py-1 md:relative md:left-0">
                <input
                  type="checkbox"
                  v-model="IsTwoSubStats"
                  :disabled="SparkCount !== 0"
                />
                <span class="text-white text-sm ml-2">雙副屬職業</span>
              </div>
            </div>
          </label>
        </div>
      </div>
      <div class="mt-[20rem] md:mt-[2rem] md:ml-20 ml-28">
        <!-- 運行區塊 -->
        <div
          class="select-none mt-4 min-h-[400px] mx-auto p-4 w-[40%] max-w-[800px] min-w-[270px] relative xl:-left-7 -left-10 md:left-10 rounded-md bg-[#ffcc99] origin-top md:scale-125 scale-100"
        >
          <!-- cont -->
          <div class="relative">
            <img
              class="mx-auto relative -top-3 z-0"
              :src="UseSparkFrame"
              alt=""
            />
            <!-- 選取的圖片 -->
            <div
              class="w-[35px] h-[35px] absolute z-10 -translate-x-1/2 left-1/2 top-[94px] bg-[#FFF]"
            >
              <img
                v-if="UseImgItem.is.url !== '-'"
                :src="`./img/${UseImgItem.is.url}.png`"
                :alt="UseImgItem.is.alt"
              />
            </div>
            <!-- 切換動畫圖 -->
            <div
              class="w-[180px] h-[88px] absolute left-1/2 -translate-x-1/2 top-[60px] bg-white"
            >
              <img src="./img/星火動畫框.gif" alt="" />
            </div>
            <!-- 動畫光 -->
            <div
              class="w-[180px] absolute left-1/2 -translate-x-1/2 top-[60px] h-[88px] bg-white transition-opacity ease-in"
              :style="[{ 'opacity': SparkAnimateBool ? 0.5 : 0 }]"
            ></div>
            <!-- 潛能顯示 -->
            <ul
              class="absolute top-[168px] left-[calc(50%+3px)] -translate-x-1/2 w-[170px]"
              v-if="SparkResultRender.length !== 0"
            >
              <li
                v-for="list in SparkResultRender"
                :key="list.title"
                class="text-white text-xs flex items-center transition-opacity ease-in"
                :style="[{ 'opacity': SparkAnimateBool ? 0 : 1 },{'transition-duration': SparkAnimateBool ? '1ms' : '700ms'}]"
              >
                <span>{{list.title}}</span><span class="mx-2">:</span>
                <span>{{list.val}}</span>
              </li>
            </ul>
          </div>
          <!-- 按鈕 -->
          <div class="flex justify-around absolute left-0 bottom-4 w-full">
            <button
              v-show="!SparkAimBool"
              @click="DiceSparkOnceFn"
              class="text-white w-[100px] md:scale-100 scale-[0.8] text-center bg-black rounded-md py-2 hover:text-[#FF0] font-bold"
            >
              點一次
            </button>
            <button
              v-show="!SparkAimBool"
              class="text-white w-[100px] md:scale-100 scale-[0.8] text-center bg-black rounded-md py-2 hover:text-[#FF0] font-bold"
              @click="DiceSparkToSuccess"
            >
              {{SparkSuccessBtn}}
            </button>
            <button
              v-show="SparkAimBool"
              class="text-white w-[100px] md:scale-100 scale-[0.8] text-center bg-black rounded-md py-2 hover:text-[#FF0] font-bold"
              @click="DiceSparkOnceFn"
            >
              繼續點
            </button>
            <button
              v-show="SparkAimBool"
              @click="ResetSparkSys"
              class="text-white w-[100px] md:scale-100 scale-[0.8] text-center bg-black rounded-md py-2 hover:text-[#FF0] font-bold"
            >
              重新開始
            </button>
          </div>
          <div class="absolute top-[calc(100%+10px)]">
            <input type="checkbox" v-model="hasSparkAnimate" />
            <span class="text-white text-sm ml-2">動畫效果</span>
          </div>
        </div>

        <div
          v-show="SparkCount !== 0"
          class="text-white max-w-[800px] w-[90%] md:pl-12 mx-auto font-bold md:mt-[9rem] mt-8 flex items-center"
        >
          <span>結果: </span>
          <span class="text-sm ml-4">{{SparkCountRender}}</span>
        </div>
        <div
          v-show="checkAlert !== ''"
          class="text-white max-w-[800px] w-[90%] md:pl-12 mx-auto font-bold md:mt-[9rem] mt-8 flex items-center"
        >
          <span>錯誤: </span>
          <!-- <span class="text-base ml-4">洗了 ? 科 XX星火 出貨了!!</span> -->
          <span class="text-base ml-4 text-[#FF0]">{{checkAlert}}</span>
        </div>
      </div>

      <footer
        class="flex fixed bottom-0 w-full justify-between text-white bg-black md:px-8 text-xs md:text-base px-1"
      >
        <span>網頁製作: 池雲寅</span>
        <span
          >參考資訊:<a
            class="text-[#FF0] ml-2"
            href="https://tw-event.beanfun.com/MapleStory/eventad/EventAD.aspx?EventADID=8389"
            target="_blank"
            >官網星火機率</a
          >、<a
            class="text-[#FF0] ml-2"
            href="https://forum.gamer.com.tw/Co.php?bsn=7650&sn=6203980"
            target="_blank"
            >裝備數值</a
          ></span
        >
      </footer>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/3.36.0/minified.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js"></script>
    <script src="./js/vue.js"></script>
    <script src="./js/main.js"></script>
  </body>
</html>
